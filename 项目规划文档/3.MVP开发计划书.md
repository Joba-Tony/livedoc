# CYZC Unity 客户端 MVP 开发计划书

> **版本**: v3.0  
> **日期**: 2025年12月31日  
> **目标**: 交付可玩的最小可行产品（MVP）

---

## 一、MVP 定义与目标

### 1.1 MVP 目标

让玩家能够完成一个**完整的游戏体验闭环**：
- 登录游戏 → 创建角色 → 进入世界 → 打怪升级 → 获得装备 → 变强

### 1.2 MVP 核心价值

| 核心体验 | 说明 |
|----------|------|
| **战斗乐趣** | 能流畅地与怪物战斗，看到伤害和效果 |
| **成长反馈** | 升级、获得装备、属性变强 |
| **基础经济** | 能买卖物品，获取金币 |

---

## 二、当前完成情况

### 2.1 已完成功能 ✅

| 功能模块 | 完成度 | 说明 |
|----------|--------|------|
| 登录/注册 | 100% | 账号系统完整 |
| 角色创建/选择/删除 | 100% | 角色管理完整 |
| 地图加载与渲染 | 100% | Tilemap正常显示 |
| 角色移动与寻路 | 100% | A*寻路正常 |
| NPC/怪物渲染 | 90% | 显示正常，移动正常 |
| 聊天系统 | 100% | 多频道聊天完整 |
| 网络框架 | 100% | XSocket协议完整 |
| 技能快捷栏 | 100% | 快捷键绑定完整 |
| 基础战斗消息 | 80% | 攻击/魔法消息已有 |

### 2.2 未完成功能 ❌

| 功能模块 | 状态 | MVP必需 |
|----------|------|---------|
| NPC交互/对话 | ❌ 未开始 | ✅ 必需 |
| 背包UI界面 | ❌ 未开始 | ✅ 必需 |
| 装备UI界面 | ❌ 未开始 | ✅ 必需 |
| 商店系统 | ❌ 未开始 | ✅ 必需 |
| 仓库系统 | ❌ 未开始 | ⚪ 可选 |
| 战斗效果完善 | 🟡 部分 | ✅ 必需 |
| 死亡/复活 | ❌ 未开始 | ✅ 必需 |
| 小地图 | ❌ 未开始 | ⚪ 可选 |
| 物品Tooltip | ❌ 未开始 | ✅ 必需 |

### 2.3 整体进度

```
已完成 ████████░░░░░░░░░░░░  40%
```

### 2.4 已投入工时

| 项目 | 数据 |
|------|------|
| 已工作时间 | 约15个工作日 |
| 团队配置 | 2程序 |
| 已投入工时 | 15天 × 2人 × 8h = **240h** |

> ⚠️ **关键认知**：实际开发中，"协议梳理+架构设计+联调测试"约占50%时间

---

## 三、MVP 功能范围（精简版）

### 3.1 必须完成的功能

| 序号 | 功能 | 纯编码工时 | 实际工时(含协议/联调) | 优先级 |
|------|------|-----------|----------------------|--------|
| 1 | NPC交互管理器 | 6h | 11h | P0 |
| 2 | NPC对话UI | 10h | 18h | P0 |
| 3 | 背包UI界面 | 12h | 22h | P0 |
| 4 | 物品拖拽/使用/丢弃 | 10h | 18h | P0 |
| 5 | 物品Tooltip | 8h | 14h | P0 |
| 6 | 装备栏UI | 10h | 18h | P0 |
| 7 | 装备穿戴/卸下 | 7h | 13h | P0 |
| 8 | 商店UI界面 | 10h | 18h | P0 |
| 9 | 购买/出售功能 | 8h | 14h | P0 |
| 10 | 战斗效果完善 | 16h | 29h | P0 |
| 11 | 死亡/复活处理 | 8h | 14h | P0 |
| 12 | 怪物血条 | 4h | 7h | P0 |
| | **小计** | **109h** | **~200h** | |

### 3.2 可选功能（有时间再做）

| 序号 | 功能 | 预计工时 | 优先级 |
|------|------|----------|--------|
| 1 | 仓库系统 | 20h | P1 |
| 2 | 小地图 | 25h | P1 |
| 3 | 物品修理 | 14h | P1 |
| 4 | 角色属性面板 | 15h | P1 |
| | **小计** | **74h** | |

### 3.3 MVP 不包含的功能

以下功能留到公测版本：
- 任务系统（44h）
- 组队系统（34h）
- 公会系统（75h）
- 交易/摆摊（58h）
- 天使/宠物系统（67h）
- 国战/战场（108h）
- 强化/宝石（55h）
- 排行榜（26h）

---

## 四、开发计划

### 4.1 团队配置

| 角色 | 人数 | 职责 |
|------|------|------|
| 程序1 | 1人 | 系统架构、协议分析、核心逻辑 |
| 程序2 | 1人 | 功能实现、UI逻辑、联调测试 |
| 美术 | 1人 | UI制作、图标、特效 |
| 测试 | 1人 | 功能测试、Bug跟踪 |

### 4.2 时间规划（修正版）

| 阶段 | 工作内容 | 工期 | 累计 | 说明 |
|------|----------|------|------|------|
| **Week 1** | NPC交互 + 协议分析 | 5天 | 5天 | 含协议抓包/分析 |
| **Week 2** | 背包系统完整 | 5天 | 10天 | 含物品协议对接 |
| **Week 3** | 装备+商店系统 | 5天 | 15天 | 含购买/穿戴协议 |
| **Week 4** | 战斗效果完善 | 4天 | 19天 | 含魔法/伤害协议 |
| **Week 5** | 测试与修复 | 4天 | 23天 | 集成测试 |
| **缓冲** | 风险预留 | 2天 | **25天** | 协议调试预留 |

> **重要说明**：相比之前的18天计划，增加了7天用于协议梳理和联调测试

### 4.3 详细任务分解

#### Week 1：NPC交互系统 (Day 1-5)

| 任务 | 工时 | 负责人 | 说明 |
|------|------|--------|------|
| NPC交互协议抓包分析 | 4h | 程序1 | 分析DEF_COMMONTYPE_TALKTONPC |
| NPC点击检测完善 | 2h | 程序1 | |
| NPC交互管理器 | 6h | 程序1 | 功能路由 |
| NPC对话UI框架 | 4h | 程序2 | |
| 对话选项系统 | 4h | 程序2 | |
| NPC头顶名称完善 | 2h | 程序2 | |
| 对话消息协议 | 4h | 程序1 | |
| 联调测试 | 6h | 程序1+2 | |
| 对话UI美化 | - | 美术 | |
| **小计** | **32h** | | |

#### Week 2：背包系统 (Day 6-10)

| 任务 | 工时 | 负责人 | 说明 |
|------|------|--------|------|
| 物品协议分析 | 6h | 程序1 | 背包/物品相关协议 |
| 背包UI界面 | 8h | 程序1 | |
| 物品格子组件 | 4h | 程序1 |
| 物品图标加载 | 3h | 程序2 |
| 物品拖拽系统 | 4h | 程序2 |
| 物品使用功能 | 4h | 程序1 |
| 物品丢弃功能 | 3h | 程序2 |
| 物品Tooltip | 8h | 程序1 |
| 背包网络同步 | 4h | 程序2 |
| 背包/物品UI美化 | - | 美术 |
| **小计** | **38h** | |

#### 第三周：装备系统（程序并行开发）

| 任务 | 工时 | 负责人 |
|------|------|--------|
| 装备栏UI | 8h | 程序1 |
| 装备穿戴逻辑 | 4h | 程序1 |
| 装备卸下逻辑 | 3h | 程序2 |
| 装备属性显示 | 6h | 程序2 |
| 装备外观更新 | 4h | 程序1 |
| 装备网络消息 | 4h | 程序2 |
| 装备栏UI美化 | - | 美术 |
| **小计** | **29h** | |

#### 第四周前：商店系统（程序并行开发）

| 任务 | 工时 | 负责人 |
|------|------|--------|
| 商店UI界面 | 8h | 程序1 |
| 商品显示 | 4h | 程序1 |
| 购买功能 | 4h | 程序2 |
| 出售功能 | 4h | 程序2 |
| 商店网络消息 | 4h | 程序1 |
| 商店UI美化 | - | 美术 |
| **小计** | **24h** | |

#### 第四周后：战斗完善（程序并行开发）

| 任务 | 工时 | 负责人 |
|------|------|--------|
| 魔法效果执行 | 8h | 程序1 |
| 怪物血条 | 4h | 程序2 |
| 死亡处理 | 4h | 程序1 |
| 复活机制 | 4h | 程序2 |
| Buff显示 | 6h | 程序1 |
| 战斗特效 | - | 美术 |
| **小计** | **26h** | |

### 4.4 里程碑

| 时间点 | 里程碑 | 验收标准 |
|--------|--------|----------|
| 第3天 | NPC可交互 | 点击NPC弹出对话框 |
| 第6天 | 背包可用 | 能看到物品、使用物品 |
| 第8天 | 装备可用 | 能穿戴装备、看到外观变化 |
| 第10天 | 商店可用 | 能买卖物品 |
| 第12天 | 战斗完善 | 战斗流畅、死亡可复活 |
| 第18天 | MVP交付 | 完整流程可玩 |

---

## 五、技术要点

### 5.1 关键技术难点

| 难点 | 解决方案 | 风险 |
|------|----------|------|
| 物品数据管理 | 复用现有ItemManager | 低 |
| UI拖拽系统 | Unity EventSystem | 中 |
| 装备外观更新 | SpriteRenderer动态替换 | 低 |
| NPC功能路由 | 配置表+策略模式 | 低 |

### 5.2 需要的消息协议（已在cyzc_old中确认）

| 功能 | 消息类型 |
|------|----------|
| 物品使用 | DEF_COMMONTYPE_USEITEM |
| 物品丢弃 | DEF_COMMONTYPE_DROPITEM |
| 装备穿戴 | DEF_COMMONTYPE_EQUIPITEM |
| 装备卸下 | DEF_COMMONTYPE_RELEASEITEM |
| 购买物品 | DEF_COMMONTYPE_PURCHASEITEM |
| 出售物品 | DEF_COMMONTYPE_SELLITEM |
| NPC对话 | DEF_COMMONTYPE_NPCTALK |

---

## 六、风险管理

| 风险 | 影响 | 应对措施 |
|------|------|----------|
| 消息协议不匹配 | 高 | 提前抓包验证 |
| UI适配问题 | 中 | 预留调试时间 |
| 战斗效果复杂 | 中 | 先做基础效果，后续迭代 |
| 人员变动 | 高 | 文档完善 |

---

## 七、交付成果

### 7.1 MVP 交付物

1. **可运行客户端** - Windows版本
2. **热更新资源包** - 支持后续更新
3. **功能说明文档** - 操作指南

### 7.2 MVP 可体验的完整流程

```
注册账号 → 登录游戏 → 创建角色 → 进入世界 → 与NPC对话
    → 打怪升级 → 获得掉落 → 管理背包 → 穿戴装备 → 购买药品 → 继续战斗
```

---

## 八、总结

| 项目 | 内容 |
|------|------|
| **团队配置** | 2程序 + 1美术 + 1测试 |
| **当前进度** | 40%（已投入15天） |
| **MVP纯编码工时** | 109h |
| **MVP实际工时** | ~200h（含协议/联调） |
| **预计工期** | **25个工作日（5周）** |
| **预计交付时间** | 第40天（2025年2月中旬） |
| **后续公测版本** | 额外需要约50天 |

### 关键修正说明

> 相比之前版本的主要变化：
> 
> 1. **工期从18天增加到25天**：增加了协议梳理、联调测试时间
> 2. **参考实际数据**：基于已完成40%用了240h的实际进度
> 3. **隐藏成本系数**：MVP阶段约1.8倍（协议分析+架构设计+联调测试）

---

### 工作分配说明

| 角色 | 主要工作 |
|------|----------|
| 程序1 | NPC交互、背包核心、装备穿戴、战斗效果 |
| 程序2 | 对话UI、物品拖拽、装备属性、商店交易 |
| 美术 | UI界面设计、图标制作、特效资源 |
| 测试 | 功能测试、Bug跟踪、流程验证 |

---

> 如有疑问请随时沟通。
