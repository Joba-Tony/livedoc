# 国战英雄排名机制

## 排名依据

国战英雄排名**仅依据 `m_iWarContribution`（战争贡献值）**进行排序。

## 排名计算

- 国战结束时计算排名
- 分阵营（阿瑞登/艾尔维）分别统计
- **只有获胜方**的前7名玩家获得"国战英雄"称号
- 管理员账号不参与排名

## 战争贡献值获取途径

| 获取方式 | 贡献值 | 代码位置 |
|---------|--------|---------|
| 击杀敌方玩家 | (经验奖励 - 经验奖励/3) × 12 | Game.cpp:31765 |
| 建造战车 (Type 36/37) | +700 | Game.cpp:14976 |
| 建造兵营 (Type 38/39) | +500 | Game.cpp:14978 |
| 击杀敌方NPC/建筑 | 根据NPC类型不同 | Game.cpp:17149 |
| 军团长接收下属贡献 | 下属建设点数 / 10 | NewPartySystem.cpp:31318 |
| 战败方补偿 | +玩家等级 | NewPartySystem.cpp:28341 |

## 称号显示

排名存储在 `m_crusadeOrder` 变量中，通过 `m_iExtStatus` 的 24-26 位同步到客户端。

| 名次 | CrusadeOrder值 | 客户端显示 |
|------|---------------|-----------|
| 第1名 | 11 | ★国战英雄第一名★ |
| 第2名 | 12 | ★国战英雄第二名★ |
| 第3名 | 13 | ★国战英雄第三名★ |
| 第4名 | 14 | ★国战英雄第四名★ |
| 第5名 | 15 | ★国战英雄第五名★ |
| 第6名 | 16 | ★国战英雄第六名★ |
| 第7名 | 17 | ★国战英雄第七名★ |

## 相关代码位置

- 排名计算逻辑：`NewPartySystem.cpp` 第 28450-28900 行
- 击杀玩家贡献：`Game.cpp` 第 31765 行
- 建造设施贡献：`Game.cpp` 第 14976 行
- 击杀NPC贡献：`Game.cpp` 第 17149 行
- 客户端称号显示：`Game.cpp`（客户端）第 40692-40720 行
